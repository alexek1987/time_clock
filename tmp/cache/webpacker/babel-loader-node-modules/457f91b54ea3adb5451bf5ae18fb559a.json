{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction fetchData() {\n  fetch(\"http://localhost:3000/api/v1/jobs/2\").then(function (response) {\n    if (!response.ok) {\n      throw Error(\"An error occurred. Please try again.\");\n    }\n\n    return response.json();\n  }).then(function (data) {\n    var position = data.position;\n    var clocked_out = data.shifts[0].clock_out !== '—';\n    document.querySelector('#position').innerHTML = \"<h1>\".concat(position, \"</h1>\");\n    var firstName = data.shifts.map(function (data) {\n      return \"\\n      <h2>\".concat(data.user.first_name, \"</h2>\\n      \");\n    });\n    document.querySelector(\"#first_name\").innerHTML = firstName;\n    var timeClock = data.shifts.map(function (shift) {\n      return \"\\n      <div>\\n        <h2>Clock in</h2>\\n        <p>\".concat(shift.clock_in, \"</p>\\n      </div>\\n      <div>\\n        <h2>Clock out</h2>\\n        <p>\").concat(shift.clock_out, \"</p>\\n      </div>\\n      \");\n    });\n    document.querySelector(\"#time_clock\").innerHTML = timeClock;\n    var timeClockButton = document.querySelector('#time_clock_btn');\n\n    if (clocked_out) {\n      timeClockButton.innerText = 'Clock in';\n    } else {\n      timeClockButton.innerText = 'Clock out';\n    }\n  })[\"catch\"](function (error) {\n    console.log(error);\n  });\n}\n\nfetchData();\n\nfunction createNewTimeEntry() {\n  fetch(\"http://localhost:3000/api/v1/jobs/2/new-time-entry\", {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-User-Email': 'mike@brown.com',\n      'X-User-Token': 'ZxFkx33i9eqsZZZ-jKEp'\n    }\n  }).then(function (response) {\n    if (!response.ok) {\n      throw Error(\"An error occurred. Please try again.\");\n    }\n\n    return response;\n  });\n}\n\nfunction assignHandlers() {\n  var timeClockButton = document.querySelector('#time_clock_btn');\n  timeClockButton.addEventListener('click', /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return createNewTimeEntry();\n\n            case 2:\n              fetchData();\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}\n\nassignHandlers();","map":{"version":3,"sources":["/Users/alexander/code/alexek1987/job_api/app/javascript/includes/script.js"],"names":["fetchData","fetch","then","response","ok","Error","json","data","position","clocked_out","shifts","clock_out","document","querySelector","innerHTML","firstName","map","user","first_name","timeClock","shift","clock_in","timeClockButton","innerText","error","console","log","createNewTimeEntry","method","headers","assignHandlers","addEventListener","event"],"mappings":";;;;;;AAAA,SAASA,SAAT,GAAqB;AACnBC,EAAAA,KAAK,CAAC,qCAAD,CAAL,CACCC,IADD,CACM,UAAAC,QAAQ,EAAI;AAChB,QAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,YAAMC,KAAK,CAAC,sCAAD,CAAX;AACD;;AACD,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACD,GAND,EAMGJ,IANH,CAMQ,UAAAK,IAAI,EAAI;AAEd,QAAIC,QAAQ,GAAGD,IAAI,CAACC,QAApB;AACA,QAAIC,WAAW,GAAGF,IAAI,CAACG,MAAL,CAAY,CAAZ,EAAeC,SAAf,KAA6B,GAA/C;AAEAC,IAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,SAApC,iBAAuDN,QAAvD;AAEA,QAAIO,SAAS,GAAGR,IAAI,CAACG,MAAL,CAAYM,GAAZ,CAAgB,UAAAT,IAAI,EAAI;AACtC,mCACMA,IAAI,CAACU,IAAL,CAAUC,UADhB;AAGD,KAJe,CAAhB;AAKAN,IAAAA,QAAQ,CAACC,aAAT,CAAuB,aAAvB,EAAsCC,SAAtC,GAAkDC,SAAlD;AAEA,QAAII,SAAS,GAAGZ,IAAI,CAACG,MAAL,CAAYM,GAAZ,CAAgB,UAAAI,KAAK,EAAI;AACvC,4EAGOA,KAAK,CAACC,QAHb,qFAOOD,KAAK,CAACT,SAPb;AAUD,KAXe,CAAhB;AAYAC,IAAAA,QAAQ,CAACC,aAAT,CAAuB,aAAvB,EAAsCC,SAAtC,GAAkDK,SAAlD;AAEA,QAAIG,eAAe,GAAGV,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAtB;;AAEA,QAAIJ,WAAJ,EAAiB;AACfa,MAAAA,eAAe,CAACC,SAAhB,GAA4B,UAA5B;AACD,KAFD,MAEO;AACLD,MAAAA,eAAe,CAACC,SAAhB,GAA4B,WAA5B;AACD;AACF,GAzCD,WAyCS,UAAAC,KAAK,EAAI;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,GA3CD;AA4CD;;AAEDxB,SAAS;;AAET,SAAS2B,kBAAT,GAA8B;AAC5B1B,EAAAA,KAAK,CAAC,oDAAD,EAAuD;AAC1D2B,IAAAA,MAAM,EAAE,KADkD;AAE1DC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEP,sBAAgB,gBAFT;AAGP,sBAAgB;AAHT;AAFiD,GAAvD,CAAL,CAQC3B,IARD,CAQM,UAAAC,QAAQ,EAAI;AAChB,QAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,YAAMC,KAAK,CAAC,sCAAD,CAAX;AACD;;AACD,WAAOF,QAAP;AACD,GAbD;AAcD;;AAED,SAAS2B,cAAT,GAA0B;AACxB,MAAIR,eAAe,GAAGV,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAtB;AAEAS,EAAAA,eAAe,CAACS,gBAAhB,CAAiC,OAAjC;AAAA,wEACE,iBAAgBC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACQL,kBAAkB,EAD1B;;AAAA;AAEE3B,cAAAA,SAAS;;AAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF;;AAAA;AAAA;AAAA;AAAA;AAKD;;AAED8B,cAAc","sourcesContent":["function fetchData() {\n  fetch(\"http://localhost:3000/api/v1/jobs/2\")\n  .then(response => {\n    if (!response.ok) {\n      throw Error(\"An error occurred. Please try again.\")\n    }\n    return response.json()\n  }).then(data => {\n\n    var position = data.position;\n    var clocked_out = data.shifts[0].clock_out !== '—';\n\n    document.querySelector('#position').innerHTML = `<h1>${position}</h1>`;\n\n    var firstName = data.shifts.map(data => {\n      return `\n      <h2>${data.user.first_name}</h2>\n      `\n    })\n    document.querySelector(\"#first_name\").innerHTML = firstName;\n\n    var timeClock = data.shifts.map(shift => {\n      return `\n      <div>\n        <h2>Clock in</h2>\n        <p>${shift.clock_in}</p>\n      </div>\n      <div>\n        <h2>Clock out</h2>\n        <p>${shift.clock_out}</p>\n      </div>\n      `\n    })\n    document.querySelector(\"#time_clock\").innerHTML = timeClock;\n\n    var timeClockButton = document.querySelector('#time_clock_btn')\n\n    if (clocked_out) {\n      timeClockButton.innerText = 'Clock in';\n    } else {\n      timeClockButton.innerText = 'Clock out';\n    }\n  }).catch(error => {\n    console.log(error)\n  });\n}\n\nfetchData()\n\nfunction createNewTimeEntry() {\n  fetch(\"http://localhost:3000/api/v1/jobs/2/new-time-entry\", {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-User-Email': 'mike@brown.com',\n      'X-User-Token': 'ZxFkx33i9eqsZZZ-jKEp'\n    }\n  })\n  .then(response => {\n    if (!response.ok) {\n      throw Error(\"An error occurred. Please try again.\")\n    }\n    return response;\n  })\n}\n\nfunction assignHandlers() {\n  var timeClockButton = document.querySelector('#time_clock_btn')\n\n  timeClockButton.addEventListener('click',\n    async function (event) {\n      await createNewTimeEntry()\n      fetchData()\n  })\n}\n\nassignHandlers()\n"]},"metadata":{},"sourceType":"module"}